
    <UserControl x:Class="Saina.WPF.Accounting.DocumentAccounting.DocumentHeader.AccDocumentHeaderListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Saina.WPF.Accounting.DocumentAccounting.DocumentHeader"
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions" 
             xmlns:converter="clr-namespace:Saina.WPF.Converters"
             xmlns:behaviors="clr-namespace:Saina.WPF.Behaviors"
             xmlns:my="http://schemas.microsoft.com/wpf/2008/toolkit"
             xmlns:date="Saina.WPF"
             xmlns:common="clr-namespace:Saina.WPF"
             mc:Ignorable="d" 
             FlowDirection="RightToLeft" PreviewKeyDown="UserControl_PreviewKeyDown" Unloaded="UserControl_Unloaded" >
    <UserControl.CommandBindings>
        <CommandBinding Command="local:Command.Add" Executed="AddButton_Click" />
        <CommandBinding Command="local:Command.Delete" Executed="DeleteButton_Click" />
        <CommandBinding Command="local:Command.Cancel" Executed="CancelButton_Click" />
        <CommandBinding Command="local:Command.Show" Executed="ShowButton_Click" />
        <CommandBinding Command="local:Command.Design" Executed="DesignButton_Click" />
        <CommandBinding Command="local:Command.Print" Executed="PrintButton_Click" />
        <CommandBinding Command="local:Command.Draft" Executed="DraftButton_Click" />
        <CommandBinding Command="local:Command.Temporary" Executed="TemporaryButton1_Click" />
        <CommandBinding Command="local:Command.BackFromEnd" Executed="BackFromEndButton_Click" />
        <CommandBinding Command="local:Command.End" Executed="EndButton_Click" />
        <CommandBinding Command="local:Command.Permanent" Executed="PermanentButton_Click" />
    </UserControl.CommandBindings>
    <UserControl.InputBindings>
        <KeyBinding Modifiers="Ctrl" Key="N" Command="local:Command.Add"    />
        <KeyBinding  Key="Delete" Command="local:Command.Delete"  />
        <KeyBinding Key="Esc" Command="local:Command.Cancel"  />
        <KeyBinding  Key="F6" Command="local:Command.Show"    />
        <KeyBinding  Key="F7" Command="local:Command.Design"  />
        <KeyBinding Modifiers="Ctrl" Key="P" Command="local:Command.Print"   />
        <KeyBinding Modifiers="Shift+Alt" Key="T" Command="local:Command.Draft"   />
        <KeyBinding Modifiers="Ctrl" Key="S" Command="local:Command.Temporary"   />
        <KeyBinding Modifiers="Shift+Alt" Key="B" Command="local:Command.BackFromEnd"  />
        <KeyBinding Modifiers="Shift+Alt" Key="E" Command="local:Command.End"          />
        <KeyBinding Modifiers="Shift+Alt" Key="P" Command="local:Command.Permanent"  />
    </UserControl.InputBindings>
    <UserControl.Resources>

        <converter:EnumToDescription x:Key="EnumToDescription"/>
        <converter:ColorToBrushConverter x:Key="colorToBrushConverter" />
        <Style TargetType="telerik:PropertyGridField" BasedOn="{StaticResource PropertyGridFieldStyle}">
            <Setter Property="Height" Value="25"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        </Style>
        <Style TargetType="telerik:RadComboBox" BasedOn="{StaticResource RadComboBoxStyle}">
            <Setter Property="OpenDropDownOnFocus" Value="True"/>
        </Style>
    </UserControl.Resources>

    <telerik:RadTabControl SelectionChanged="RadTabControl_SelectionChanged" IsContentPreserved="True">
        <telerik:RadTabItem Name="listRadTabItem" Header="فهرست">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>
                <telerik:RadGridView x:Name="AccDocumentHeaderRadGridView"
                                     ItemsSource="{Binding AccDocumentHeaders}"
                                     MouseDoubleClick="AccDocumentHeaderRadGridView_MouseDoubleClick"
                                     IsSynchronizedWithCurrentItem="True"   
                                     FilteringMode="FilterRow"
                                     GroupRenderMode="Nested"
                                     CanUserFreezeColumns="False"
                                     ShowGroupPanel="True"
                                     RowIndicatorVisibility="Collapsed"
                                     IsReadOnly="True"
                                     AutoGenerateColumns="False" 
                                     Grid.Column="1"
                                     SelectionMode="Extended"
                                     ValidatesOnDataErrors="None"
                                     ValidationType="None"
                                     FieldFilterEditorCreated="AccDocumentHeaderRadGridView_FieldFilterEditorCreated"
                                     FilterOperatorsLoading="AccDocumentHeaderRadGridView_FilterOperatorsLoading"
                                     SelectionChanged="AccDocumentHeaderRadGridView_SelectionChanged"
                                     SelectionChanging="AccDocumentHeaderRadGridView_SelectionChanging"
                                     SelectedCellsChanging="AccDocumentHeaderRadGridView_SelectedCellsChanging"
                                     Height="900"
                                     ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Visible">
                    <telerik:RadGridView.SortDescriptors>
                      

                    </telerik:RadGridView.SortDescriptors>
                    <telerik:RadGridView.ControlPanelItems>
                     
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>
                                
                                <Button  Content="شماره گذاری"  Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom"
                                             BorderBrush="{x:Null}"
                                             Foreground="White" 
                                             Background="{x:Null}"
                                           Click="numberButton_Click"
                                            />
                                

                            </telerik:ControlPanelItem.ButtonContent>
                        </telerik:ControlPanelItem>
                        
                    
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>
                                <Button     Content="خاتمه"    BorderBrush="{x:Null}"
                                             Foreground="White" 
                                             Background="{x:Null}" Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="EndItemsButton_Click" />
                            </telerik:ControlPanelItem.ButtonContent>
                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>
                                <Button     Content="برگشت از خاتمه"   BorderBrush="{x:Null}"
                                             Foreground="White" 
                                             Background="{x:Null}" Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="BackEndItemsButton_Click" />
                            </telerik:ControlPanelItem.ButtonContent>
                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>

                                <Button  Content="بروزرسانی"  Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom"
                                             BorderBrush="{x:Null}"
                                             Foreground="White" 
                                             Background="{x:Null}"
                                           Click="Refresh_Click"
                                            />


                            </telerik:ControlPanelItem.ButtonContent>
                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>

                                <Button  Name="showButton"   Content="طراحی"  ToolTip="طراحی"  Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom"
                                             BorderBrush="{x:Null}"
                                             Foreground="White" 
                                             Background="{x:Null}"
                                             Click="DesignButton_Click"
                                            />

                            </telerik:ControlPanelItem.ButtonContent>
                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>
                                <telerik:RadDropDownButton AutoOpenDelay="0:0:0.0" Name="ReportMenu" 
                                      Content="گزارش"   ToolTip="گزارش"   BorderBrush="{x:Null}"
                                             Foreground="White" 
                                             Background="{x:Null}" Click="ReportMenu_Click">
                                    <telerik:RadDropDownButton.DropDownContent>

                                        <ListBox Name="reportList">
                                            <ListBoxItem Name="reportList1" Content="گزارش همه" Selected="ListBoxItemReportALL_Selected" />
                                            <ListBoxItem Name="reportList2" Content="گزارش انتخابی" Selected="ListBoxItemReport_Selected" />
                                        </ListBox>
                                    </telerik:RadDropDownButton.DropDownContent>
                                </telerik:RadDropDownButton>

                            </telerik:ControlPanelItem.ButtonContent>
                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>
                                <telerik:RadDropDownButton AutoOpenDelay="0:0:0.0" Name="PrintMenu" 
                                      Content="چاپ" FontSize="14" ToolTip="چاپ"   BorderBrush="{x:Null}"
                                             Foreground="White" 
                                             Background="{x:Null}">
                                    <telerik:RadDropDownButton.DropDownContent>

                                        <ListBox>
                                            <ListBoxItem Content="چاپ همه" Selected="ListBoxItemPrintALL_Selected" />
                                            <ListBoxItem Content="چاپ انتخابی" Selected="ListBoxItemPrint_Selected" />
                                        </ListBox>
                                    </telerik:RadDropDownButton.DropDownContent>
                                </telerik:RadDropDownButton>

                            </telerik:ControlPanelItem.ButtonContent>

                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>

                                <!--<Button  Content="افزودن سند"  Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom"
                                             BorderBrush="{x:Null}"
                                             Foreground="White" 
                                             Background="{x:Null}"
                                           Click="AddButton_Click"
                                            />-->
                                <Button Name="addButton1"    Content="&#xe907;" FontFamily="{StaticResource TelerikWebUI}"   Foreground="White" 
                                              BorderBrush="{x:Null}"
                                             Background="{x:Null}" FontSize="16"    ToolTip="(Ctrl+N)افزودن" Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="AddButton_Click" />


                            </telerik:ControlPanelItem.ButtonContent>
                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>
                                <Button  Name="deleteButton2"    Content="&#xe10c;" FontFamily="{StaticResource TelerikWebUI}"   Foreground="White" 
                                              BorderBrush="{x:Null}"
                                             Background="{x:Null}" FontSize="16"    ToolTip="(Delete)حذف"   Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="DeleteButton_Click" />
                                <!--//<Button  Name="deleteButton1"    Content="حذف سند" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="(Delete)حذف"   Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="DeleteButton_Click" />-->

                            </telerik:ControlPanelItem.ButtonContent>
                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem >
                            <telerik:ControlPanelItem.ButtonContent>
                                <Button  Name="ExcelButton"   Content="اکسل" FontSize="14"
                                             ToolTip="ارسال به اکسل"   Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" 
                                              BorderBrush="{x:Null}"
                                             Foreground="White" 
                                             Background="{x:Null}"
                                           Click="btnExport_Click"  />

                            </telerik:ControlPanelItem.ButtonContent>
                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem ButtonTooltip="مدیریت ستون ها">
                            <telerik:ControlPanelItem.ButtonContent>
                                <Grid HorizontalAlignment="Center" Height="16" Width="16" Margin="-3,0,0,0">
                                    <Path Data="M2.6822092E-06,12.000001 L6.0000029,12.000001 L6.0000029,15.000001 L2.6822092E-06,15.000001 z M2.6822092E-06,8.000001 L6.0000029,8.000001 L6.0000029,11.000001 L2.6822092E-06,11.000001 z M0,0 L6,0 L6,3 L0,3 z" Fill="{telerik:Windows8Resource ResourceKey=StrongBrush}" Margin="4,0,9,0" Stretch="Fill"/>
                                    <Path Data="M0,0 L6,0 L6,3 L0,3 z" Fill="{telerik:Windows8Resource ResourceKey=StrongBrush}" Height="3" Margin="4,4,9,0" Stretch="Fill" VerticalAlignment="Top"/>
                                    <Path Data="M3,0 L3,3 L0,3 z" Fill="{telerik:Windows8Resource ResourceKey=StrongBrush}" HorizontalAlignment="Left" Height="3" Margin="0,4,0,0" Stretch="Fill" Stroke="{telerik:Windows8Resource ResourceKey=StrongBrush}" StrokeThickness="0" VerticalAlignment="Top" Width="3" RenderTransformOrigin="0.5,0.5">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <RotateTransform Angle="-45"/>
                                                <ScaleTransform ScaleX="-2.3299793205922015E-08" ScaleY="4.4408920985006262E-16">
                                                </ScaleTransform>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                    <Path Data="M0.50000036,12.499999 L2.5000005,12.499999 L2.5000005,14.499999 L0.50000036,14.499999 z M0.5,8.5 L2.5000002,8.5 L2.5000002,10.5 L0.5,10.5 z M0.5,4.5 L7.5,4.5 L7.5,6.5 L0.5,6.5 z M0.5,0.5 L7.5,0.5 L7.5,2.5 L0.5,2.5 z" HorizontalAlignment="Right" Stretch="Fill" Stroke="#FF767676" Width="8"/>
                                </Grid>
                            </telerik:ControlPanelItem.ButtonContent>
                            <telerik:ControlPanelItem.Content>
                                <ListBox ItemsSource="{Binding Columns}" BorderThickness="0"  >
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox Content="{Binding Header, Mode=TwoWay}" IsChecked="{Binding IsVisible, Mode=TwoWay}" />
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </telerik:ControlPanelItem.Content>
                        </telerik:ControlPanelItem>
                        <telerik:ControlPanelItem ButtonTooltip="تنظیمات">
                            <telerik:ControlPanelItem.ButtonContent>
                                <Path Width="16" Height="16" HorizontalAlignment="Center" VerticalAlignment="Center" Data="F1M511.6665,467.2715C509.6575,468.2995,507.1905,467.5095,506.1635,465.5005C505.1325,463.4915,505.9265,461.0325,507.9355,460.0005C509.9445,458.9745,512.4095,459.7695,513.4375,461.7745C514.4695,463.7825,513.6775,466.2405,511.6665,467.2715 M518.5605,462.8565L517.8825,460.0155L515.3935,460.2825C515.1415,459.8585,514.8505,459.4725,514.5225,459.1275L515.4435,456.8975L512.9515,455.3645L511.3965,457.2925C510.8575,457.1515,510.3025,457.0815,509.7415,457.0775L508.7675,454.9135L505.9375,455.6715L506.2705,458.0665C505.8795,458.3075,505.5215,458.5835,505.2025,458.8835L503.0535,458.0005L501.5175,460.4875L503.3665,461.9795C503.2315,462.4865,503.1515,463.0135,503.1415,463.5435L501.0335,464.4175L501.7125,467.2605L504.0635,467.0085C504.3355,467.4795,504.6545,467.9065,505.0235,468.2815L504.1575,470.3765L506.6475,471.9095L508.1425,470.0605C508.6495,470.1855,509.1655,470.2555,509.6925,470.2615L510.5785,472.3905L513.4255,471.7135L513.1675,469.2965C513.6075,469.0285,514.0145,468.7215,514.3635,468.3765L516.5455,469.2745L518.0815,466.7855L516.1495,465.2305C516.2665,464.7565,516.3315,464.2705,516.3385,463.7805z" Stretch="Fill"  Fill="{telerik:Windows8Resource ResourceKey=StrongBrush}"/>
                            </telerik:ControlPanelItem.ButtonContent>
                            <telerik:ControlPanelItem.Content>
                                <telerik:RadPropertyGrid SortAndGroupButtonsVisibility="Collapsed" DescriptionPanelVisibility="Collapsed" LabelColumnWidth="154" Width="318" FieldIndicatorVisibility="Collapsed" AutoGeneratePropertyDefinitions="False"  Item="{Binding}">
                                    <telerik:RadPropertyGrid.PropertyDefinitions>
                                        <telerik:PropertyDefinition Binding="{Binding AlternationCount,Mode=TwoWay}" DisplayName="تعداد رنگ جایگزین"/>
                                        <telerik:PropertyDefinition Binding="{Binding Background}" DisplayName="پس زمینه">
                                            <telerik:PropertyDefinition.EditorTemplate>
                                                <DataTemplate>
                                                    <telerik:RadColorPicker HorizontalAlignment="Left" SelectedColor="{Binding Background,Converter={StaticResource colorToBrushConverter},Mode=TwoWay}"/>
                                                </DataTemplate>
                                            </telerik:PropertyDefinition.EditorTemplate>
                                        </telerik:PropertyDefinition>
                                        <telerik:PropertyDefinition Binding="{Binding BorderBrush}" DisplayName="ضخامت قلم">
                                            <telerik:PropertyDefinition.EditorTemplate>
                                                <DataTemplate>
                                                    <telerik:RadColorPicker HorizontalAlignment="Left" SelectedColor="{Binding BorderBrush,Converter={StaticResource colorToBrushConverter},Mode=TwoWay}"/>
                                                </DataTemplate>
                                            </telerik:PropertyDefinition.EditorTemplate>
                                        </telerik:PropertyDefinition>
                                        <telerik:PropertyDefinition Binding="{Binding Foreground}" DisplayName="پس زمینه">
                                            <telerik:PropertyDefinition.EditorTemplate>
                                                <DataTemplate>
                                                    <telerik:RadColorPicker HorizontalAlignment="Left" SelectedColor="{Binding Foreground,Converter={StaticResource colorToBrushConverter},Mode=TwoWay}"/>
                                                </DataTemplate>
                                            </telerik:PropertyDefinition.EditorTemplate>
                                        </telerik:PropertyDefinition>
                                        <telerik:PropertyDefinition Binding="{Binding ShowGroupPanel,Mode=TwoWay}" DisplayName="نمایش گروه پنل"/>
                                        <telerik:PropertyDefinition Binding="{Binding ShowColumnHeaders,Mode=TwoWay}" DisplayName="نمایش عنوان ستون ها"/>
                                        <telerik:PropertyDefinition Binding="{Binding GridLinesVisibility,Mode=TwoWay}" DisplayName="نمایش خطوط گرید"/>
                                        <telerik:PropertyDefinition Binding="{Binding FilteringMode,Mode=TwoWay}" DisplayName="حالت فیلتر"/>
                                        <telerik:PropertyDefinition Binding="{Binding FontSize,Mode=TwoWay}" DisplayName="اندازه قلم"/>
                                        <telerik:PropertyDefinition Binding="{Binding RowHeight,Mode=TwoWay}" DisplayName="ارتفاع سطر"/>
                                        <telerik:PropertyDefinition Binding="{Binding SelectionMode, Mode=TwoWay}" DisplayName="حالت انتخاب"/>
                                    </telerik:RadPropertyGrid.PropertyDefinitions>
                                </telerik:RadPropertyGrid>
                            </telerik:ControlPanelItem.Content>
                        </telerik:ControlPanelItem>
                    </telerik:RadGridView.ControlPanelItems>
                    <telerik:RadContextMenu.ContextMenu>
                        <telerik:RadContextMenu x:Name="GridContextMenu" ItemClick="AccDocumentItemsRadGridViewContextMenu_ItemClick">
                            <telerik:RadContextMenu.Items>
                                <telerik:RadMenuItem Header="گزارش" Tag="show"/>
                                <telerik:RadMenuItem Header="طراحی" Tag="design"/>
                                <telerik:RadMenuItem Header="چاپ" Tag="print"/>
                                <telerik:RadMenuItem Header="کپی کردن" Tag="copyHeader"/>
                                <telerik:RadMenuItem Header="چسباندن" Tag="pasteHeader" Name="PasteHeader" IsEnabled="False"/>
                            </telerik:RadContextMenu.Items>
                        </telerik:RadContextMenu>
                    </telerik:RadContextMenu.ContextMenu>
                    <telerik:RadGridView.Columns>
                        <telerik:GridViewDataColumn Header="شماره سند" DataMemberBinding="{Binding DocumentNumber}" MinWidth="50" />
                        <telerik:GridViewDataColumn Header="شماره ثابت" DataMemberBinding="{Binding SystemFixNumber}" MinWidth="50"/>
                        <telerik:GridViewDataColumn Header="شماره روزانه" DataMemberBinding="{Binding DailyNumber}" MinWidth="50" />
                        <telerik:GridViewDataColumn Header="شماره دستی" DataMemberBinding="{Binding ManualDocumentNumber}"	MinWidth="50" />
                        <telerik:GridViewDataColumn Header="تاریخ سند"	DataMemberBinding="{Binding DocumentDateString,StringFormat='{}{0:yyyy/MM/dd}'}" Width="200"	MinWidth="200" >
                            <telerik:GridViewColumn.CellTemplate>
                                <DataTemplate>

                                    <TextBlock Text="{Binding DocumentDateString,StringFormat='{}{0:yyyy/MM/dd}'}"
                                          VerticalAlignment="Center" />
                                </DataTemplate>
                            </telerik:GridViewColumn.CellTemplate>
                        </telerik:GridViewDataColumn>
                        <telerik:GridViewDataColumn Header="نام سیستم " DataMemberBinding="{Binding SystemName ,Mode=TwoWay}" Width="*" MinWidth="100" />
                        <telerik:GridViewDataColumn Header="صادر کننده " DataMemberBinding="{Binding Exporter,Mode=TwoWay}" Width="*" MinWidth="100" />
                        <telerik:GridViewDataColumn Header="تایید کننده" DataMemberBinding="{Binding Seconder}" Width="*" MinWidth="100" />
                        <telerik:GridViewDataColumn Header="شرح هدر" DataMemberBinding="{Binding HeaderDescription}" Width="*" MinWidth="200"/>
                        <telerik:GridViewDataColumn Header="جمع مبلغ سند"	DataMemberBinding="{Binding SumDebit }"	Width="*" MinWidth="100"/>
                        <telerik:GridViewDataColumn Header="نوع سند" DataMemberBinding="{Binding TypeDocument.TypeDocumentTitle}" Width="100" MinWidth="100" />
                        <telerik:GridViewDataColumn Header="وضعیت" DataMemberBinding="{Binding Status, Converter={StaticResource EnumToDescription}}" Width="80"	MinWidth="80" />
                    </telerik:RadGridView.Columns>
                </telerik:RadGridView>
                <!--<telerik:RadDataPager DisplayMode="FirstLastPreviousNextNumeric, Text" PageSize="50" 
                              Source="{Binding Items, ElementName=accDocumentHeaderDataGrid}" IsTotalItemCountFixed="False" Grid.Row="1"/>-->
            </Grid>
        </telerik:RadTabItem>
        <telerik:RadTabItem Name="detailRadTabItem" Header="جزئیات" >
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
               
                    <StackPanel Orientation="Horizontal" Grid.Row="0" HorizontalAlignment="Left" >
                        <GroupBox Header="درج سند" Grid.Column="1" Grid.Row="4" >
                            <StackPanel Orientation="Horizontal">
                                <Button Name="addButton2"    Content="&#xe907;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="(Ctrl+N)افزودن" Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="AddButton_Click" />
                                <Button      Content="&#xe10c;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="(Delete)حذف"   Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="DeleteButton_Click" />
                                <Button Name="cancelButton" Content="&#xe115;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="(Esc)انصراف" Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="CancelButton_Click" />
                                <Button Name="editButton" Content="&#xe10b;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="ویرایش" Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="EditButton_Click" />

                            </StackPanel>
                        </GroupBox>
                        <GroupBox Header="وضعیت اسناد" Grid.Column="1" Grid.Row="4" >
                            <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="1" Margin="0 4 0 0">
                                <Button Name="draftButton"  Content="&#xe649;"  FontFamily="{StaticResource TelerikWebUI}" FontSize="16" ToolTip="(Alt+Shift+D)پیش نویس"  Margin="4 0 4 0" TabIndex="9" VerticalAlignment="Bottom" Click="DraftButton_Click"/>
                                <Button Name="temporaryButton" Content="&#xe64b;"  FontFamily="{StaticResource TelerikWebUI}" FontSize="16" ToolTip="(Alt+Shift+T)موقت"  Margin="4 0 4 0" TabIndex="10" VerticalAlignment="Bottom" Click="TemporaryButton_Click" />
                                <Button Name="endButton" Content="&#xe64c;"  FontFamily="{StaticResource TelerikWebUI}" FontSize="16" ToolTip="(Alt+Shift+E)خاتمه"   Margin="4 0 4 0" TabIndex="11" VerticalAlignment="Bottom" Click="EndButton_Click" />
                                <Button Name="backFromEndButton" Content="&#xe101;"  FontFamily="{StaticResource TelerikWebUI}" FontSize="16" ToolTip="(Alt+Shift+B)برگشت از خاتمه"  Margin="0 0 4 0" VerticalAlignment="Bottom" TabIndex="12"  Click="BackFromEndButton_Click" />
                                <!--<Button Name="permanentButton" Content="&#xe118;"  FontFamily="{StaticResource TelerikWebUI}" FontSize="16" ToolTip="(Alt+Shift+P)دائم"  Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom"  Click="PermanentButton_Click" Visibility="Hidden"/>-->
                            </StackPanel>

                        </GroupBox>

                        <!--<GroupBox Header="گزارشات" Grid.Column="1" Grid.Row="4" >
                        <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="1" Margin="0 4 0 0">
                            <Button  Name="showButton"   Content="طراحی" FontSize="14" ToolTip="(F6)طراحی"  Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="ShowButton_Click" />
                            <Button  Name="designButton" Content="گزارش" FontSize="14" ToolTip="(F7)گزارش"   Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="DesignButton_Click" />
                            <Button  Name="printButton"   Content="چاپ" FontSize="14"  ToolTip="(Ctrl+P)چاپ"   Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="PrintButton_Click" />
                            <Button   Content="اکسل" FontSize="14"  ToolTip="(Ctrl+E)اکسل"   Margin="4 0 4 0" TabIndex="13" VerticalAlignment="Bottom" Click="btnExport_Click" />
                           
                        </StackPanel>

                    </GroupBox>-->
                        <GroupBox Header="تاریخچه اسناد/مکاتبات" Grid.Column="1" Grid.Row="0" >
                            <StackPanel Orientation="Horizontal"   Grid.Column="1"  Grid.Row="3" HorizontalAlignment="Left" Margin="0 4 0 0">
                                <Button  Width="60" Height="30" ToolTip="سند مبنا"  TabIndex="6" Margin="0 0 4 0" FlowDirection="RightToLeft">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Cyan;component/Resources/Icon/asnad.png"  />
                                </Button.Background>
                            </Button>
                            <Button  VerticalAlignment="Bottom"  Content="&#xe629;"  FontFamily="{StaticResource TelerikWebUI}" FontSize="16" ToolTip="سند مبنا" Click="Button_Click" TabIndex="6" Margin="0 0 4 0"></Button>
                            <Button VerticalAlignment="Bottom"  Content="&#xe64f;"  FontFamily="{StaticResource TelerikWebUI}" FontSize="16" ToolTip="مکاتبات"   TabIndex="7" Click="AttachmentButton_Click" Margin="0 0 4 0"></Button>
                                <Button VerticalAlignment="Top" Content="&#xe651;"  FontFamily="{StaticResource TelerikWebUI}" FontSize="16" ToolTip="تاریخچه اسناد" TabIndex="8" Click="DocumentHistoryButton_Click" Margin="0,0,4,0"></Button>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="right" >
                        <Button  Name="firstButton"   Content="&#xe009;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="ابتدا" Background="{x:Null}" BorderBrush="{x:Null}"       TabIndex="13" VerticalAlignment="Bottom" Click="FirstButton_Click" />
                        <Button  Name="nextButton"   Content="&#xe005;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="بعدی"  Background="{x:Null}" BorderBrush="{x:Null}"    TabIndex="13" VerticalAlignment="Bottom" Click="NextButton_Click" />
                        <Button  Name="previousButton"   Content="&#xe007;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="قبلی"  Background="{x:Null}" BorderBrush="{x:Null}" TabIndex="13" VerticalAlignment="Bottom" Click="PreviousButton_Click" />
                        <Button  Name="lastButton"   Content="&#xe00b;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="انتها" Background="{x:Null}" BorderBrush="{x:Null}"     TabIndex="13" VerticalAlignment="Bottom" Click="LastButton_Click" />

                    </StackPanel>
               
                <telerik:RadDataForm Name="AccDocumentHeaderDataForm" ItemsSource="{Binding AccDocumentHeaders}" Loaded="AccDocumentHeaderDataForm_Loaded"
                                     EditEnded="AccDocumentHeaderDataForm_EditEnded" CancelButtonContent="انصراف" 
                                     DeletingItem="AccDocumentHeaderDataForm_DeletingItem" CommandButtonsVisibility="None" LabelPosition="Beside"
                                     CommitButtonContent="تأیید" DeletedItem="AccDocumentHeaderDataForm_DeletedItem" AutoGenerateFields="False"
                                     AddedNewItem="AccDocumentHeaderDataForm_AddedNewItem" 
                                     CurrentItemChanged="AccDocumentHeaderDataForm_CurrentItemChanged"
                                     Grid.Row="1" Grid.Column="0"  ValidatingItem="AccDocumentHeaderDataForm_ValidatingItem" ValidationSummaryVisibility="Visible" AutoCommit="False" LostFocus="AccDocumentHeaderDataForm_LostFocus"
                                     >
                    <telerik:RadDataForm.ReadOnlyTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="0" Margin="0 0 0 5">
                                    <telerik:DataFormDataField Name="documentNumberDataFormDataField"  DataMemberBinding="{Binding DocumentNumber, Mode=TwoWay}" Label="شماره سند:" IsReadOnly="True" MinWidth="150" MaxWidth="300" Loaded="DataFormDataField_Loaded"/>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding ManualDocumentNumber,Mode=TwoWay}"  Label="شماره دستی:" IsReadOnly="True" MinWidth="150" MaxWidth="300"/>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding SystemFixNumber,Mode=TwoWay}" Label="شماره ثابت:" IsReadOnly="True" MinWidth="150" MaxWidth="300"/>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding DailyNumber,Mode=TwoWay}" Label="شماره روزانه:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding DailyNumber, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                 FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding TypeDocument.TypeDocumentTitle,Mode=TwoWay}"  Label="عنوان سند:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding TypeDocument.TypeDocumentTitle, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding Status,Mode=TwoWay}"  Label="وضعیت سند:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding Status, Mode=TwoWay, Converter={StaticResource EnumToDescription}}"
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding SystemName,Mode=TwoWay}"  Label="نام سیستم:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding SystemName, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>

                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="1" >
                                   
                                    <!--<telerik:DataFormComboBoxField  Label="نوع سند" 
                                         SelectedValuePath="TypeDocumentId"
                                          DataMemberBinding="{Binding TypeDocumentId, Mode=TwoWay}"
                                          DisplayMemberPath="TypeDocumentTitle"
                                          ItemsSource="{Binding DataContext.TypeDocuments, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
                                        MinWidth="180" MaxWidth="300" />-->
                                    <telerik:DataFormDateField  DataMemberBinding="{Binding DocumentDate,Mode=TwoWay}" Label="تاریخ سند:" MinWidth="220" MaxWidth="300">
                                        <telerik:DataFormDateField.Content>
                                            <my:DatePicker  HorizontalAlignment="Left"  Name="dateDoc"   Width="100"  IsEnabled="False" 
                                                           SelectedDate="{Binding DocumentDate, Mode=TwoWay, NotifyOnValidationError=True, StringFormat=\{0:d\}, ValidatesOnDataErrors=True}"
                                                      Grid.Column="1" Grid.Row="1" SelectedDateFormat="Long"  />
                                            <!--<telerik:RadDatePicker Name="dateDoc" SelectedValue="{Binding  DocumentDate, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" 
                                               DateTimeWatermarkContent="تاریخ را وارد نمائید"  Grid.Column="1" Grid.Row="1" Margin="7 7 0 0" DisplayFormat="Short" Width="115" HorizontalAlignment="Left"  TabIndex="1"/>-->
                                        </telerik:DataFormDateField.Content>
                                    </telerik:DataFormDateField>
                                    <telerik:DataFormDataField Name="docDescDataFormDataField" DataMemberBinding="{Binding HeaderDescription,Mode=TwoWay}" Label="شرح سند:">
                                        <telerik:DataFormDataField.Content>
                                            <telerik:RadAutoCompleteBox 
                                                SearchText="{Binding HeaderDescription,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                AutoCompleteMode="Suggest"
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft"
                                                IsEnabled="False"
                                                Width="300" />
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding Exporter,Mode=TwoWay}"  Label="صادر کننده:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding Exporter, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding Seconder,Mode=TwoWay}"  Label="تایید کننده:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding Seconder, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </telerik:RadDataForm.ReadOnlyTemplate>
                    <telerik:RadDataForm.EditTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="0" Margin="0 0 0 5">
                                    <telerik:DataFormDataField Name="documentNumberDataFormDataField" DataMemberBinding="{Binding DocumentNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  IsReadOnly="{Binding DataContext.IsReadOnly, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" Label="شماره سند:" MinWidth="150" MaxWidth="300" Loaded="DataFormDataField_Loaded"/>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding ManualDocumentNumber,Mode=TwoWay}"  Label="شماره دستی:" IsReadOnly="{Binding DataContext.IsReadOnly, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" MinWidth="150" MaxWidth="300"/>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding SystemFixNumber,Mode=TwoWay}" Label="شماره ثابت:" IsReadOnly="True" MinWidth="150" MaxWidth="300"/>
                                        <telerik:DataFormDataField DataMemberBinding="{Binding DailyNumber,Mode=TwoWay}"  Label="شماره روزانه:">
                                       
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding DailyNumber, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                 FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding TypeDocument.TypeDocumentTitle,Mode=TwoWay}" Label="عنوان سند:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding TypeDocument.TypeDocumentTitle, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding Status,Mode=TwoWay}"  Label="وضعیت سند:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding Status, Mode=TwoWay, Converter={StaticResource EnumToDescription}}"
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding SystemName,Mode=TwoWay}"  Label="نام سیستم:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding SystemName, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>

                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="1" >
                                    <telerik:DataFormDateField  DataMemberBinding="{Binding DocumentDate,Mode=TwoWay}" Label="تاریخ سند:" MinWidth="220" MaxWidth="300">
                                        <telerik:DataFormDateField.Content>
                                            <my:DatePicker HorizontalAlignment="Left"  Name="dateDoc"   Width="100"  
                                                           SelectedDate="{Binding  DocumentDate, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnDataErrors=True,StringFormat='dd/MM/yyyy'}"
                                                      Grid.Column="1" Grid.Row="1" SelectedDateFormat="Long"/>
                                            <!--<telerik:RadDatePicker
                                                Name="dateDoc" SelectedValue="{Binding  DocumentDate, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" 
                                               DateTimeWatermarkContent="تاریخ را وارد نمائید"  Grid.Column="1" Grid.Row="1" Margin="7 7 0 0" DisplayFormat="Short" Width="115" HorizontalAlignment="Left"  TabIndex="1"/>-->
                                        </telerik:DataFormDateField.Content>
                                    </telerik:DataFormDateField>                                    <telerik:DataFormDataField Name="headerDescriptionDataFormDataField" DataMemberBinding="{Binding HeaderDescription,Mode=TwoWay}" Label="شرح سند:">
                                        <telerik:DataFormDataField.Content>
                                            <telerik:RadAutoCompleteBox 
                                                SearchText="{Binding HeaderDescription,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                AutoCompleteMode="Suggest"
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft"
                                               
                                                Width="300" />
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding Exporter,Mode=TwoWay}"  Label="صادر کننده:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding Exporter, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding Seconder,Mode=TwoWay}"  Label="تایید کننده:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding Seconder, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </telerik:RadDataForm.EditTemplate>
                    <telerik:RadDataForm.NewItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="0" Margin="0 0 0 5" FocusManager.FocusedElement="{Binding ElementName=TxtB}">
                                    <telerik:DataFormDataField Name="documentNumberDataFormDataField"  DataMemberBinding="{Binding DocumentNumber,Mode=TwoWay}" Label="شماره سند:"  IsReadOnly="{Binding IsReadOnly}" MinWidth="150" MaxWidth="300" Loaded="DataFormDataField_Loaded"/>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding ManualDocumentNumber,Mode=TwoWay}"  Label="شماره دستی:"  IsReadOnly="{Binding IsReadOnly}" MinWidth="150" MaxWidth="300"/>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding SystemFixNumber,Mode=TwoWay}" Label="شماره ثابت:" IsReadOnly="True" MinWidth="150" MaxWidth="300"/>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding DailyNumber,Mode=TwoWay}" Label="شماره روزانه:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding DailyNumber, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding TypeDocument.TypeDocumentTitle,Mode=TwoWay}" Label="عنوان سند:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding TypeDocument.TypeDocumentTitle, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding Status,Mode=TwoWay}"  Label="وضعیت سند:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding Status, Mode=TwoWay, Converter={StaticResource EnumToDescription}}"
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding SystemName,Mode=TwoWay}"  Label="نام سیستم:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding SystemName, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>

                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="1" >
                                    <telerik:DataFormDateField  DataMemberBinding="{Binding DocumentDate,Mode=TwoWay}" Label="تاریخ سند:" MinWidth="220" MaxWidth="300"  DataContextChanged="DataFormDateField_DataContextChanged">
                                        <telerik:DataFormDateField.Content>
                                            <my:DatePicker HorizontalAlignment="Left"  Name="dateDoc"   Width="100"
                                                           SelectedDate="{Binding  DocumentDate, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnDataErrors=True,StringFormat='dd/MM/yyyy'}"
                                                           
                                                      Grid.Column="1" Grid.Row="1" SelectedDateFormat="Long"/>
                                            <!--<telerik:RadDatePicker Name="dateDoc" SelectedValue="{Binding  DocumentDate, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" 
                                               DateTimeWatermarkContent="تاریخ را وارد نمائید"  Grid.Column="1" Grid.Row="1" Margin="7 7 0 0" DisplayFormat="Short" Width="115" HorizontalAlignment="Left"  TabIndex="1"/>-->
                                        </telerik:DataFormDateField.Content>
                                    </telerik:DataFormDateField>
                                    <telerik:DataFormDataField Name="docDescDataFormDataField" DataMemberBinding="{Binding HeaderDescription,Mode=TwoWay}" Label="شرح سند:">
                                        <telerik:DataFormDataField.Content>
                                            <telerik:RadAutoCompleteBox 
                                                SearchText="{Binding HeaderDescription,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                 AutoCompleteMode="Suggest"
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                 FlowDirection="RightToLeft"
                                                
                                                Width="300" />
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding Exporter,Mode=TwoWay}"  Label="صادر کننده:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding Exporter, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                    <telerik:DataFormDataField DataMemberBinding="{Binding Seconder,Mode=TwoWay}"  Label="تایید کننده:">
                                        <telerik:DataFormDataField.Content>
                                            <Label
                                                Content="{Binding Seconder, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
                                                VerticalAlignment="Center" 
                                                VerticalContentAlignment="Bottom"
                                                HorizontalAlignment="Left"
                                                FlowDirection="RightToLeft">
                                            </Label>
                                        </telerik:DataFormDataField.Content>
                                    </telerik:DataFormDataField>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </telerik:RadDataForm.NewItemTemplate>
                </telerik:RadDataForm>
                <!--<ScrollViewer x:Name="scrollviewer" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">-->

                    <telerik:RadGridView Name="AccDocumentItemsRadGridView" 
                                     DataContext="{Binding AccDocumentHeaders}"  
                                     ItemsSource="{Binding AccDocumentItems}" 
                                     SelectionMode="Multiple"
                                     SelectedItem="{Binding DataContext.AccDocumentItem, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                                     AutoGenerateColumns="False" 
                                     PreviewKeyDown="AccDocumentItemsRadGridView_PreviewKeyDown"
                                     GroupRenderMode="Flat" 
                                     NewRowPosition="Bottom"
                                     EnableLostFocusSelectedState ="False"
                                     RowIndicatorVisibility="Collapsed"
                                     ShowColumnFooters="True" KeyDown="AccDocumentItemsRadGridView_KeyDown"
                                     CellValidating="AccDocumentItemsRadGridView_CellValidating" CellValidated="AccDocumentItemsRadGridView_CellValidated"
                                     Grid.Row="2"
                                     Grid.Column="0"
                                     ValidatesOnDataErrors="InEditMode"
                                     ValidationType="None"
                                     BeginningEdit="AccDocumentItemsRadGridView_BeginningEdit"
                                     CellEditEnded="AccDocumentItemsRadGridView_CellEditEnded"
                                     AddingNewDataItem="AccDocumentItemsRadGridView_AddingNewDataItem"
                                     KeyboardNavigation.TabNavigation="Cycle"
                                     Loaded="AccDocumentItemsRadGridView_Loaded"
                                     CurrentCellChanged="AccDocumentItemsRadGridView_CurrentCellChanged"
                                     CopyingCellClipboardContent="AccDocumentItemsRadGridView_CopyingCellClipboardContent"
                                     MouseDoubleClick="AccDocumentItemsRadGridView_MouseDoubleClick">
                        <telerik:RadGridView.ControlPanelItems>
                            <telerik:ControlPanelItem ButtonTooltip="مدیریت ستون ها">
                                <telerik:ControlPanelItem.ButtonContent>
                                    <Grid HorizontalAlignment="Center" Height="16" Width="16" Margin="-3,0,0,0">
                                        <Path Data="M2.6822092E-06,12.000001 L6.0000029,12.000001 L6.0000029,15.000001 L2.6822092E-06,15.000001 z M2.6822092E-06,8.000001 L6.0000029,8.000001 L6.0000029,11.000001 L2.6822092E-06,11.000001 z M0,0 L6,0 L6,3 L0,3 z" Fill="{telerik:Windows8Resource ResourceKey=StrongBrush}" Margin="4,0,9,0" Stretch="Fill"/>
                                        <Path Data="M0,0 L6,0 L6,3 L0,3 z" Fill="{telerik:Windows8Resource ResourceKey=StrongBrush}" Height="3" Margin="4,4,9,0" Stretch="Fill" VerticalAlignment="Top"/>
                                        <Path Data="M3,0 L3,3 L0,3 z" Fill="{telerik:Windows8Resource ResourceKey=StrongBrush}" HorizontalAlignment="Left" Height="3" Margin="0,4,0,0" Stretch="Fill" Stroke="{telerik:Windows8Resource ResourceKey=StrongBrush}" StrokeThickness="0" VerticalAlignment="Top" Width="3" RenderTransformOrigin="0.5,0.5">
                                            <Path.RenderTransform>
                                                <TransformGroup>
                                                    <RotateTransform Angle="-45"/>
                                                    <ScaleTransform ScaleX="-2.3299793205922015E-08" ScaleY="4.4408920985006262E-16">
                                                    </ScaleTransform>
                                                </TransformGroup>
                                            </Path.RenderTransform>
                                        </Path>
                                        <Path Data="M0.50000036,12.499999 L2.5000005,12.499999 L2.5000005,14.499999 L0.50000036,14.499999 z M0.5,8.5 L2.5000002,8.5 L2.5000002,10.5 L0.5,10.5 z M0.5,4.5 L7.5,4.5 L7.5,6.5 L0.5,6.5 z M0.5,0.5 L7.5,0.5 L7.5,2.5 L0.5,2.5 z" HorizontalAlignment="Right" Stretch="Fill" Stroke="#FF767676" Width="8"/>
                                    </Grid>
                                </telerik:ControlPanelItem.ButtonContent>
                                <telerik:ControlPanelItem.Content>
                                <ListBox ItemsSource="{Binding Columns}" BorderThickness="0" Name="ColumnsSttings" telerik:PersistenceManager.StorageId="ColumnsSettings">
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <CheckBox Content="{Binding Header, Mode=TwoWay}" IsChecked="{Binding IsVisible, Mode=TwoWay}" />
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </telerik:ControlPanelItem.Content>
                            </telerik:ControlPanelItem>
                            <telerik:ControlPanelItem ButtonTooltip="تنظیمات">
                                <telerik:ControlPanelItem.ButtonContent>
                                    <Path Width="16" Height="16" HorizontalAlignment="Center" VerticalAlignment="Center" Data="F1M511.6665,467.2715C509.6575,468.2995,507.1905,467.5095,506.1635,465.5005C505.1325,463.4915,505.9265,461.0325,507.9355,460.0005C509.9445,458.9745,512.4095,459.7695,513.4375,461.7745C514.4695,463.7825,513.6775,466.2405,511.6665,467.2715 M518.5605,462.8565L517.8825,460.0155L515.3935,460.2825C515.1415,459.8585,514.8505,459.4725,514.5225,459.1275L515.4435,456.8975L512.9515,455.3645L511.3965,457.2925C510.8575,457.1515,510.3025,457.0815,509.7415,457.0775L508.7675,454.9135L505.9375,455.6715L506.2705,458.0665C505.8795,458.3075,505.5215,458.5835,505.2025,458.8835L503.0535,458.0005L501.5175,460.4875L503.3665,461.9795C503.2315,462.4865,503.1515,463.0135,503.1415,463.5435L501.0335,464.4175L501.7125,467.2605L504.0635,467.0085C504.3355,467.4795,504.6545,467.9065,505.0235,468.2815L504.1575,470.3765L506.6475,471.9095L508.1425,470.0605C508.6495,470.1855,509.1655,470.2555,509.6925,470.2615L510.5785,472.3905L513.4255,471.7135L513.1675,469.2965C513.6075,469.0285,514.0145,468.7215,514.3635,468.3765L516.5455,469.2745L518.0815,466.7855L516.1495,465.2305C516.2665,464.7565,516.3315,464.2705,516.3385,463.7805z" Stretch="Fill"  Fill="{telerik:Windows8Resource ResourceKey=StrongBrush}"/>
                                </telerik:ControlPanelItem.ButtonContent>
                                <telerik:ControlPanelItem.Content>
                                    <telerik:RadPropertyGrid SortAndGroupButtonsVisibility="Collapsed" DescriptionPanelVisibility="Collapsed" LabelColumnWidth="154" Width="318" FieldIndicatorVisibility="Collapsed" AutoGeneratePropertyDefinitions="False"  Item="{Binding}">
                                        <telerik:RadPropertyGrid.PropertyDefinitions>
                                            <telerik:PropertyDefinition Binding="{Binding AlternationCount,Mode=TwoWay}" DisplayName="تعداد رنگ جایگزین"/>
                                            <telerik:PropertyDefinition Binding="{Binding Background}" DisplayName="پس زمینه">
                                                <telerik:PropertyDefinition.EditorTemplate>
                                                    <DataTemplate>
                                                        <telerik:RadColorPicker HorizontalAlignment="Left" SelectedColor="{Binding Background,Converter={StaticResource colorToBrushConverter},Mode=TwoWay}"/>
                                                    </DataTemplate>
                                                </telerik:PropertyDefinition.EditorTemplate>
                                            </telerik:PropertyDefinition>
                                            <telerik:PropertyDefinition Binding="{Binding BorderBrush}" DisplayName="ضخامت قلم">
                                                <telerik:PropertyDefinition.EditorTemplate>
                                                    <DataTemplate>
                                                        <telerik:RadColorPicker HorizontalAlignment="Left" SelectedColor="{Binding BorderBrush,Converter={StaticResource colorToBrushConverter},Mode=TwoWay}"/>
                                                    </DataTemplate>
                                                </telerik:PropertyDefinition.EditorTemplate>
                                            </telerik:PropertyDefinition>
                                            <telerik:PropertyDefinition Binding="{Binding Foreground}" DisplayName="پس زمینه">
                                                <telerik:PropertyDefinition.EditorTemplate>
                                                    <DataTemplate>
                                                        <telerik:RadColorPicker HorizontalAlignment="Left" SelectedColor="{Binding Foreground,Converter={StaticResource colorToBrushConverter},Mode=TwoWay}"/>
                                                    </DataTemplate>
                                                </telerik:PropertyDefinition.EditorTemplate>
                                            </telerik:PropertyDefinition>
                                            <telerik:PropertyDefinition Binding="{Binding ShowGroupPanel,Mode=TwoWay}" DisplayName="نمایش گروه پنل"/>
                                            <telerik:PropertyDefinition Binding="{Binding ShowColumnHeaders,Mode=TwoWay}" DisplayName="نمایش عنوان ستون ها"/>
                                            <telerik:PropertyDefinition Binding="{Binding GridLinesVisibility,Mode=TwoWay}" DisplayName="نمایش خطوط گرید"/>
                                            <telerik:PropertyDefinition Binding="{Binding FilteringMode,Mode=TwoWay}" DisplayName="حالت فیلتر"/>
                                            <telerik:PropertyDefinition Binding="{Binding FontSize,Mode=TwoWay}" DisplayName="اندازه قلم"/>
                                            <telerik:PropertyDefinition Binding="{Binding RowHeight,Mode=TwoWay}" DisplayName="ارتفاع سطر"/>
                                            <telerik:PropertyDefinition Binding="{Binding SelectionMode, Mode=TwoWay}" DisplayName="حالت انتخاب"/>
                                        </telerik:RadPropertyGrid.PropertyDefinitions>
                                    </telerik:RadPropertyGrid>
                                </telerik:ControlPanelItem.Content>
                            </telerik:ControlPanelItem>
                        </telerik:RadGridView.ControlPanelItems>
                        <telerik:RadContextMenu.ContextMenu>
                            <telerik:RadContextMenu x:Name="AccDocumentItemsRadGridViewContextMenu" Opening="AccDocumentItemsRadGridViewContextMenu_Opening" ItemClick="AccDocumentItemsRadGridViewContextMenu_ItemClick">
                                <telerik:RadContextMenu.Items>
                                    <telerik:RadMenuItem Header="اضافه کردن" Tag="add"/>
                                    <telerik:RadMenuItem Header="حذف کردن" Tag="delete" />
                                    <telerik:RadMenuItem Header="ویرایش کردن" Tag="edit"/>
                                <telerik:RadMenuItem Header="کپی کردن" Tag="copy" Name="Copy"/>
                                    <telerik:RadMenuItem Header="چسباندن" Tag="paste" IsEnabled="False" Name="Paste"/>
                            </telerik:RadContextMenu.Items>
                            </telerik:RadContextMenu>
                        </telerik:RadContextMenu.ContextMenu>
                        <telerik:RadGridView.Columns>
                        <common:RowNumberColumn UniqueName="SLId" x:Name="RowNumber" Header="ردیف" Width="50" MinWidth="50"/>
                            <telerik:GridViewDataColumn Name="SL"  Header="کد معین" UniqueName="SL"  DataMemberBinding="{Binding SLId,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Width="*" FilterMemberPath="SL.SLCode" MinWidth="100">
                                <telerik:GridViewDataColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>

                                        <TextBlock Text="{Binding SL.SLCode}"></TextBlock>
                                            <TextBlock Text="{Binding SL.Title}"  Grid.Column="1"></TextBlock>
                                        </Grid>
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellTemplate>
                                <telerik:GridViewDataColumn.CellEditTemplate >
                                    <DataTemplate>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="auto"/>
                                            </Grid.ColumnDefinitions>
                                            <telerik:RadComboBox  IsEditable="True" IsReadOnly="True"  TextSearchMode="Contains"  telerik:TextSearch.TextPath="SLCode" 
                                      ItemsSource="{Binding DataContext.SLs, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
                                      SelectedValuePath="SLId" SelectedItem="{Binding SL}"  Grid.Column="0">
                                                <telerik:RadComboBox.SelectedValue>
                                                    <Binding Path="SLId" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                                                        <Binding.ValidationRules>
                                                            <local:InputValidationRule  ErrorMessage="معین نباید خالی باشد" />
                                                        </Binding.ValidationRules>
                                                    </Binding>
                                                </telerik:RadComboBox.SelectedValue>
                                                <telerik:RadComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition />
                                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock Text="{Binding SLCode}"></TextBlock>
                                                            <TextBlock Text="{Binding Title}"  Grid.Column="1"></TextBlock>
                                                        </Grid>
                                                    </DataTemplate>
                                                </telerik:RadComboBox.ItemTemplate>
                                                <telerik:RadComboBox.FilteringBehavior>
                                                    <local:SLFilteringBehavior />
                                                </telerik:RadComboBox.FilteringBehavior>
                                            </telerik:RadComboBox>
                                            <Button Content="&#xe907;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="افزودن حساب معین"
                                            Click="AddSLButton_Click"
                                               HorizontalAlignment="Left"                         
                                               TabIndex="0"
                                             Grid.Column="1"
                                              />

                                        </Grid>
                                </DataTemplate>
                                </telerik:GridViewDataColumn.CellEditTemplate>
                            </telerik:GridViewDataColumn>
                            <telerik:GridViewDataColumn UniqueName="DL1"  Header="کد تفصیل 1" Width="*" MinWidth="100" FilterMemberPath="DL.DLCode" >
                                <telerik:GridViewDataColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBlock Text="{Binding DL1.DLCode}"></TextBlock>
                                            <TextBlock Text="{Binding DL1.Title}"  Grid.Column="1"></TextBlock>
                                        </Grid>
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellTemplate>
                                <telerik:GridViewDataColumn.CellEditTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="auto"/>
                                            </Grid.ColumnDefinitions>
                                        <telerik:RadComboBox Name="DL1RadComboBox" IsEditable="True" IsReadOnly="True" TextSearchMode="Contains" StaysOpenOnEdit="True" telerik:TextSearch.TextPath="DLCode" 
                                      ItemsSource="{Binding DataContext.DLs, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
                                                 SelectedValuePath="DLId"
                                                 SelectedValue="{Binding DL1Id, Mode=TwoWay}"
                                                 SelectedItem="{Binding DL1, Mode=TwoWay}" DropDownOpened="DL1RadComboBox_DropDownOpened"
                                                    Grid.Column="0"         
                                      >
                                            <telerik:RadComboBox.ItemTemplate>
                                                <DataTemplate>

                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition />
                                                            <ColumnDefinition Width="*"></ColumnDefinition>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock Text="{Binding DLCode}"></TextBlock>
                                                        <TextBlock Text="{Binding Title}"  Grid.Column="1"></TextBlock>
                                                    </Grid>

                                                </DataTemplate>
                                            </telerik:RadComboBox.ItemTemplate>
                                            <telerik:RadComboBox.FilteringBehavior>
                                                <local:DLFilteringBehavior />
                                            </telerik:RadComboBox.FilteringBehavior>
                                        </telerik:RadComboBox>
                                        <Button Content="&#xe907;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="افزودن حساب تفصیل"
                                                   Click="AddDLButton_Click"
                                                   HorizontalAlignment="Left"                         
                                                   TabIndex="0"
                                                 Grid.Column="1"
                                              />

                                    </Grid>
                                                                      </DataTemplate>
                                </telerik:GridViewDataColumn.CellEditTemplate>
                            </telerik:GridViewDataColumn>
                            <telerik:GridViewDataColumn UniqueName="DL2"  Header="کد تفصیل 2" Width="*" MinWidth="100" FilterMemberPath="DL.DLCode" >
                                <telerik:GridViewDataColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="{Binding DL2.DLCode}"></TextBlock>
                                            <TextBlock Text="{Binding DL2.Title}"  Grid.Column="1"></TextBlock>
                                        </Grid>
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellTemplate>
                                <telerik:GridViewDataColumn.CellEditTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="auto"/>
                                            </Grid.ColumnDefinitions>
                                            <telerik:RadComboBox Name="DL2RadComboBox" IsEditable="True" IsReadOnly="True" TextSearchMode="Contains" StaysOpenOnEdit="True" telerik:TextSearch.TextPath="DLCode" 
                                      ItemsSource="{Binding DataContext.DLs, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
                                                 SelectedValuePath="DLId"
                                                 SelectedValue="{Binding DL2Id, Mode=TwoWay}"
                                                 SelectedItem="{Binding DL2, Mode=TwoWay}" DropDownOpened="DL2RadComboBox_DropDownOpened"
                                                 Grid.Column="0" >

                                                <telerik:RadComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition />
                                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock Text="{Binding DLCode}"></TextBlock>
                                                            <TextBlock Text="{Binding Title}"  Grid.Column="1"></TextBlock>
                                                        </Grid>

                                                    </DataTemplate>
                                                </telerik:RadComboBox.ItemTemplate>
                                                <telerik:RadComboBox.FilteringBehavior>
                                                    <local:DLFilteringBehavior />
                                                </telerik:RadComboBox.FilteringBehavior>
                                            </telerik:RadComboBox>
                                            <Button Content="&#xe907;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="افزودن حساب تفصیل"
                                                   Click="AddDLButton_Click"
                                                   HorizontalAlignment="Left"                         
                                                   TabIndex="0"
                                                    Grid.Column="1"
                                              />
                                        </Grid>
                                    
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellEditTemplate>
                            </telerik:GridViewDataColumn>
                        <!--<telerik:GridViewDataColumn UniqueName="Currency"  Header="ارز" Width="*" MinWidth="100" FilterMemberPath="DL.DLCode" >
                            <telerik:GridViewDataColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="*"></ColumnDefinition>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Text="{Binding Currency.CurrencyTitle}"  Grid.Column="1"></TextBlock>
                                    </Grid>
                                </DataTemplate>
                            </telerik:GridViewDataColumn.CellTemplate>
                            <telerik:GridViewDataColumn.CellEditTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="auto"/>
                                        </Grid.ColumnDefinitions>
                                        <telerik:RadComboBox Name="DL2RadComboBox" IsEditable="True" IsReadOnly="True" TextSearchMode="Contains" StaysOpenOnEdit="True" telerik:TextSearch.TextPath="DLCode" 
                                      ItemsSource="{Binding DataContext.Currencies, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
                                                 SelectedValuePath="CurrencyId"
                                                 SelectedValue="{Binding CurrencyId, Mode=TwoWay}"
                                                 SelectedItem="{Binding Currency, Mode=TwoWay}" 
                                                 Grid.Column="0" >

                                            <telerik:RadComboBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition />
                                                            <ColumnDefinition Width="*"></ColumnDefinition>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock Text="{Binding CurrencyTitle}"  Grid.Column="1"></TextBlock>
                                                    </Grid>

                                                </DataTemplate>
                                            </telerik:RadComboBox.ItemTemplate>
                                            <telerik:RadComboBox.FilteringBehavior>
                                                <local:DLFilteringBehavior />
                                            </telerik:RadComboBox.FilteringBehavior>
                                        </telerik:RadComboBox>
                                        <Button Content="&#xe907;" FontFamily="{StaticResource TelerikWebUI}" FontSize="16"    ToolTip="افزودن حساب تفصیل"
                                                   Click="AddDLButton_Click"
                                                   HorizontalAlignment="Left"                         
                                                   TabIndex="0"
                                                    Grid.Column="1"
                                              />
                                    </Grid>

                                </DataTemplate>
                            </telerik:GridViewDataColumn.CellEditTemplate>
                        </telerik:GridViewDataColumn>-->

                        <telerik:GridViewDataColumn UniqueName="description1"  Header="شرح ارتیکل 1" Width="*" MinWidth="200">
                                <telerik:GridViewDataColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Description1}"></TextBlock>
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellTemplate>
                                <telerik:GridViewDataColumn.CellEditTemplate>
                                    <DataTemplate>
                                        <telerik:RadComboBox Name="SLStandardDescriptionsRadComboBox" IsEditable="True" 
                                                             GotFocus="SLStandardDescriptionsRadComboBox_GotFocus"
                                                         ItemsSource="{Binding DataContext.SLStandardDescriptions, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
                                                        DisplayMemberPath="SLStandardDescriptionTitle" DropDownOpened="Description_DropDownOpened">
                                        </telerik:RadComboBox>
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellEditTemplate>

                            </telerik:GridViewDataColumn>
                            <telerik:GridViewDataColumn UniqueName="description2"  Header="شرح ارتیکل 2" Width="*" MinWidth="200">
                                <telerik:GridViewDataColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Description2}"></TextBlock>
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellTemplate>
                                <telerik:GridViewDataColumn.CellEditTemplate>
                                    <DataTemplate>
                                    <telerik:RadComboBox Name="SLStandardDescriptionsRadComboBox" IsEditable="True" GotFocus="SLStandardDescriptionsRadComboBox2_GotFocus"
                                                         ItemsSource="{Binding DataContext.SLStandardDescriptions, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
                                                        DisplayMemberPath="SLStandardDescriptionTitle" DropDownOpened="Description_DropDownOpened">
                                        </telerik:RadComboBox>
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellEditTemplate>
                            </telerik:GridViewDataColumn>
                        <telerik:GridViewDataColumn  UniqueName="Debit" Header="بدهکار " DataFormatString="N0"  DataMemberBinding="{Binding Debit, IsAsync=True, Mode=TwoWay, NotifyOnTargetUpdated=True, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" Width="*" MinWidth="100">
                                <telerik:GridViewDataColumn.CellStyleSelector>
                                    <telerik:ConditionalStyleSelector>
                                        <telerik:StyleRule Condition="Credit > 0">
                                            <Style TargetType="telerik:GridViewCell"  BasedOn="{StaticResource GridViewCellStyle}">
                                                <Setter Property="IsEnabled" Value="False"/>
                                                <Setter Property="Value" Value="0"/>
                                            </Style>
                                        </telerik:StyleRule>
                                        <telerik:StyleRule Condition="Credit = 0">
                                            <Style TargetType="telerik:GridViewCell" BasedOn="{StaticResource GridViewCellStyle}" />
                                        </telerik:StyleRule>
                                    </telerik:ConditionalStyleSelector>
                                </telerik:GridViewDataColumn.CellStyleSelector>
                                <telerik:GridViewDataColumn.CellEditTemplate>
                                    <DataTemplate>
                                        <TextBox Text="{Binding Debit,UpdateSourceTrigger=PropertyChanged,StringFormat=N0}" GotFocus="TextBox_GotFocus">
                                            <i:Interaction.Behaviors>
                                                <behaviors:TextBoxInputRegExBehavior  RegularExpression="^-*[0-9,\.]+$"  MinLength="1" MaxLength="0"  EmptyValue="0"/>
                                            </i:Interaction.Behaviors>
                                        </TextBox>
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellEditTemplate>
                                <telerik:GridViewDataColumn.AggregateFunctions>
                                    <telerik:SumFunction ResultFormatString="{}{0:N0}"/>
                                </telerik:GridViewDataColumn.AggregateFunctions>
                            </telerik:GridViewDataColumn>
                        <telerik:GridViewDataColumn  UniqueName="Credit" Header="بستانکار " DataFormatString="N0"  DataMemberBinding="{Binding Credit, IsAsync=True, Mode=TwoWay, NotifyOnTargetUpdated=True, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" Width="*" MinWidth="100">
                            <telerik:GridViewDataColumn.CellStyleSelector>
                                <telerik:ConditionalStyleSelector>
                                    <telerik:StyleRule Condition="Debit > 0">
                                        <Style TargetType="telerik:GridViewCell"  BasedOn="{StaticResource GridViewCellStyle}">
                                            <Setter Property="IsEnabled" Value="False"/>
                                            <Setter Property="Value" Value="0"/>
                                        </Style>
                                    </telerik:StyleRule>
                                    <telerik:StyleRule Condition="Debit = 0">
                                        <Style TargetType="telerik:GridViewCell" BasedOn="{StaticResource GridViewCellStyle}">
                                            <Setter Property="Foreground" Value="Red"/>
                                        </Style>
                                    </telerik:StyleRule>
                                </telerik:ConditionalStyleSelector>
                            </telerik:GridViewDataColumn.CellStyleSelector>
                            <telerik:GridViewDataColumn.CellEditTemplate>
                                <DataTemplate>
                                    <TextBox Text="{Binding Credit,UpdateSourceTrigger=PropertyChanged,StringFormat=N0}" GotFocus="TextBox_GotFocus">
                                        <i:Interaction.Behaviors>
                                            <behaviors:TextBoxInputRegExBehavior  RegularExpression="^-*[0-9,\.]+$"  MinLength="1" MaxLength="0"  EmptyValue="0"/>
                                        </i:Interaction.Behaviors>
                                    </TextBox>
                                </DataTemplate>
                            </telerik:GridViewDataColumn.CellEditTemplate>
                            <telerik:GridViewDataColumn.AggregateFunctions>
                                <telerik:SumFunction ResultFormatString="{}{0:N0}"/>
                            </telerik:GridViewDataColumn.AggregateFunctions>
                        </telerik:GridViewDataColumn>

                        <telerik:GridViewDataColumn  UniqueName="Credit" Header="بستانکار2 " DataFormatString="N0"  DataMemberBinding="{Binding Credit, IsAsync=True, Mode=TwoWay, NotifyOnTargetUpdated=True, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" Width="*" MinWidth="100">
                                <telerik:GridViewDataColumn.CellStyleSelector>
                                    <telerik:ConditionalStyleSelector>
                                    <telerik:StyleRule Condition="CurrencyId != 0">
                                            <Style TargetType="telerik:GridViewCell"  BasedOn="{StaticResource GridViewCellStyle}">
                                                <Setter Property="IsEnabled" Value="False"/>
                                              
                                            </Style>
                                        </telerik:StyleRule>
                                      
                                    </telerik:ConditionalStyleSelector>
                                </telerik:GridViewDataColumn.CellStyleSelector>
                                <telerik:GridViewDataColumn.CellEditTemplate>
                                    <DataTemplate>
                                        <TextBox Text="{Binding Credit,UpdateSourceTrigger=PropertyChanged,StringFormat=N0}" GotFocus="TextBox_GotFocus">
                                            <i:Interaction.Behaviors>
                                                <behaviors:TextBoxInputRegExBehavior  RegularExpression="^-*[0-9,\.]+$"  MinLength="1" MaxLength="0"  EmptyValue="0"/>
                                            </i:Interaction.Behaviors>
                                        </TextBox>
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellEditTemplate>
                                <telerik:GridViewDataColumn.AggregateFunctions>
                                    <telerik:SumFunction ResultFormatString="{}{0:N0}"/>
                            </telerik:GridViewDataColumn.AggregateFunctions>
                            </telerik:GridViewDataColumn>
                        <telerik:GridViewDataColumn UniqueName="CurrencyTitle"  Header="نام ارز" FilterMemberPath="Currency.CurrencyTitle" Width="*" MinWidth="150" 
                                                        IsVisible="{Binding ElementName=CurrencyTitleCheckBox,Path=IsChecked}" DataMemberBinding="{Binding CurrencyId,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                        >
                            <telerik:GridViewDataColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Currency.CurrencyTitle}"></TextBlock>
                                </DataTemplate>
                            </telerik:GridViewDataColumn.CellTemplate>
                            <telerik:GridViewDataColumn.CellEditTemplate>
                                <DataTemplate>

                                    <telerik:RadComboBox Name="DL2RadComboBox" IsEditable="True" IsReadOnly="True" TextSearchMode="Contains" StaysOpenOnEdit="True" telerik:TextSearch.TextPath="CurrencyTitle" 
                                      ItemsSource="{Binding DataContext.Currencies, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
                                                 SelectedValuePath="CurrencyId" DisplayMemberPath="CurrencyTitle"
                                                 SelectedValue="{Binding CurrencyId, Mode=TwoWay}"
                                                 SelectedItem="{Binding Currency, Mode=TwoWay}" 
                                                         GotFocus="Currency_GotFocus"
                                                         DropDownOpened="Currency_DropDownOpened"
                                                   OpenDropDownOnFocus="True">
                                        <!--<telerik:RadComboBox IsEnabled="{Binding HasCurrency}" OpenDropDownOnFocus="True"
                                      ItemsSource="{Binding DataContext.Currencies, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
                                      SelectedValuePath="CurrencyId"
                                      SelectedValue="{Binding CurrencyId}"
                                      SelectedItem="{Binding Currency}" DisplayMemberPath="CurrencyTitle">-->
                                    </telerik:RadComboBox>
                                </DataTemplate>
                            </telerik:GridViewDataColumn.CellEditTemplate>
                            <telerik:GridViewDataColumn.AggregateFunctions>

                                <local:DiffrenceFunction ResultFormatString="{}{0:N0}" Caption="اختلاف :  "   />
                            </telerik:GridViewDataColumn.AggregateFunctions>
                            <telerik:GridViewDataColumn.Footer>
                                <StackPanel Background="Transparent">
                                    <telerik:AggregateResultsList ItemsSource="{Binding}" VerticalAlignment="Center" Grid.Column="4">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                    <TextBlock VerticalAlignment="Center" Text="{Binding Caption}" />
                                                    <TextBlock VerticalAlignment="Center" Text="{Binding FormattedValue}" Foreground="Red"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                    </telerik:AggregateResultsList>
                                </StackPanel>
                            </telerik:GridViewDataColumn.Footer>

                        </telerik:GridViewDataColumn>
                        <telerik:GridViewDataColumn UniqueName="ExchangeRate" DataMemberBinding="{Binding ExchangeRate}"  Header="نرخ ارز" FilterMemberPath="Currency.CurrencyTitle"    DataFormatString="N0" Width="*" MinWidth="100" IsVisible="{Binding ElementName=ExchangeRateCheckBox,Path=IsChecked}">
                            <telerik:GridViewDataColumn.CellStyleSelector>
                                <telerik:ConditionalStyleSelector>
                                    <telerik:StyleRule Condition="CurrencyId = 0">
                                        <Style TargetType="telerik:GridViewCell"  BasedOn="{StaticResource GridViewCellStyle}">
                                            <Setter Property="IsEnabled" Value="False"/>
                                            <Setter Property="Value" Value="0"/>
                                        </Style>
                                    </telerik:StyleRule>
                                   
                                </telerik:ConditionalStyleSelector>
                            </telerik:GridViewDataColumn.CellStyleSelector>
                        </telerik:GridViewDataColumn>

                        <telerik:GridViewMaskedInputColumn UniqueName="CurrencyAmount" DataMemberBinding="{Binding CurrencyAmount}"  Header="مبلغ ارز" FilterMemberPath="Currency.CurrencyTitle"  MaskType="Numeric"   DataFormatString="N0" Width="*" MinWidth="100" IsVisible="{Binding ElementName=AmountCheckBox,Path=IsChecked}"/>
                            <telerik:GridViewDataColumn Name="TrackingNumber" Header="شماره پیگیری" DataMemberBinding="{Binding TrackingNumber}" Width="*" MinWidth="10" IsVisible="{Binding ElementName=TrackingNumberCheckBox,Path=IsChecked}" />
                            <telerik:GridViewDataColumn DataMemberBinding="{Binding TrackingDate}"  Header="تاریخ پیگیری" Width="100" MinWidth="100" IsVisible="{Binding ElementName=TrackingDateCheckBox,Path=IsChecked}">
                                <telerik:GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock
                                        Text="{Binding TrackingDate, StringFormat={}{0:yyyy/MM/dd}}" />
                                    </DataTemplate>
                                </telerik:GridViewColumn.CellTemplate>
                                <telerik:GridViewDataColumn.CellEditTemplate>
                                    <DataTemplate>
                                    <my:DatePicker HorizontalAlignment="Left"  Name="dateTextBox"   Width="115" 
                                         SelectedDate="{Binding  TrackingDate, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnDataErrors=True}"  SelectedDateFormat="Long"
                                        />
                                    <!--<telerik:RadDatePicker 
                                        SelectedValue="{Binding  TrackingDate, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" 
                                        DateTimeWatermarkContent="تاریخ را وارد نمائید"  DisplayFormat="Short" />-->
                                    </DataTemplate>
                                </telerik:GridViewDataColumn.CellEditTemplate>
                            </telerik:GridViewDataColumn>
                            <telerik:GridViewColumn  Header="حذف">
                                <telerik:GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                    <telerik:RadButton IsBackgroundVisible="False" Grid.Column="5" Margin="10 2" MinWidth="30" ToolTipService.ToolTip="حذف سند"
                                        Command="telerik:RadGridViewCommands.Delete"
                                                       CommandParameter="{Binding}"
                                                          >
                                        <!--Command="telerik:RadGridViewCommands.Delete"
										 Click="DeleteItem_Click"
										   CommandParameter="{Binding}">-->
                                        <Grid Background="#01FFFFFF" MinWidth="24" MinHeight="20" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Path Data="M1,1.0920105 L10.875,10.873011 M10.905006,1 L9.9050312,2.0619726 L1.0460064,10.921" Stroke="#FF333333" StrokeThickness="2" RenderTransformOrigin="0.5,0.5" Stretch="Fill" Width="12" Height="12" VerticalAlignment="Center"/>
                                            </Grid>
                                        </telerik:RadButton>
                                    </DataTemplate>
                                </telerik:GridViewColumn.CellTemplate>

                            </telerik:GridViewColumn>
                        </telerik:RadGridView.Columns>
                    </telerik:RadGridView>
                <!--</ScrollViewer>-->
            </Grid>
        </telerik:RadTabItem>
    </telerik:RadTabControl>
</UserControl>
